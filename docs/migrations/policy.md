# Migration Version Policy

## 목적
- 환경별 스키마 불일치 방지
- 운영 재현성 확보

## 규칙
- 파일명은 `NNN_description.sql` 형식(3자리 이상 숫자 prefix)
- 새 변경은 항상 **가장 큰 번호 + 1**
- 기존 마이그레이션 파일은 수정하지 않고, 정정은 새 번호 파일로 추가

## 실행 원칙
- 배포 전: 최신 번호까지 순차 실행
- 실행 이력은 배포 로그/릴리스 노트에 번호 범위 기록
- `scripts/run-migrations.ts` 같은 임의 DDL 스크립트는 신규 스키마 변경 용도로 사용하지 않음

## 체크리스트
- [ ] 신규 SQL 파일 번호 중복 없음
- [ ] 롤백/재실행 안전(`IF NOT EXISTS`, idempotent) 검토
- [ ] 관련 API가 새 컬럼/인덱스를 참조할 때 구버전 대응 또는 명확한 실패 메시지 제공
