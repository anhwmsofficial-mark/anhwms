# 서비스 워커 캐시 전략

## 개요
- 서비스 워커 등록: 클라이언트 로드 완료 시 `ServiceWorkerRegister`가 `/sw.js`를 등록합니다.
- 캐시 목적: 기본 정적 리소스 캐시 + 네비게이션 오프라인 폴백 제공.

## 현재 동작
1) 설치(install)
- 캐시명: `anh-wms-v1`
- 사전 캐시: `/`, `/manifest.json`, `/icons/icon.svg`, `/offline`

2) 활성화(activate)
- 이전 캐시 삭제 후 새로운 캐시 활성화
- 모든 클라이언트에 즉시 적용

3) 요청 처리(fetch)
- 네비게이션 요청: 네트워크 우선 → 캐시 → `/offline`
- 기타 요청(정적 자산 등): 캐시 우선 → 네트워크
- 외부 도메인 요청은 서비스 워커가 관여하지 않음

## 운영상 주의사항
- 캐시 충돌: 정적 리소스가 바뀌었는데 캐시가 갱신되지 않으면 화면이 오래 유지될 수 있습니다.
- 업데이트 시점: 캐시 변경 시 `CACHE_NAME`을 변경해야 즉시 갱신됩니다.
- 오프라인 페이지 `/offline` 경로가 실제로 제공되는지 확인이 필요합니다.

## 변경 가이드
- 캐시 전략 변경 시 `public/sw.js`에서 룰을 수정합니다.
- 새로운 정적 리소스를 추가할 경우 `STATIC_ASSETS`에 반영합니다.
- 릴리스 시 캐시 무효화를 위해 `CACHE_NAME`을 버전업합니다.

## 관련 파일
- `app/layout.tsx`: 서비스 워커 등록 컴포넌트 사용
- `components/ServiceWorkerRegister.tsx`: 등록 로직
- `public/sw.js`: 캐시/라우팅 전략
